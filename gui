--[[
  Kilasik GUI - Gelişmiş Oyun Kontrol Arayüzü
  Bu script gelişmiş özellikler sunan bir GUI oluşturur
  
  Kullanım: Kodu executor'a yapıştırıp çalıştırın
]]

-- Servisler
local Players = game:GetService("Players")
local UserInputService = game:GetService("UserInputService")
local TweenService = game:GetService("TweenService")
local RunService = game:GetService("RunService")
local Workspace = game:GetService("Workspace")
local Teams = game:GetService("Teams")
local ReplicatedStorage = game:GetService("ReplicatedStorage")
local CoreGui = game:GetService("CoreGui")
local TeleportService = game:GetService("TeleportService")
local Lighting = game:GetService("Lighting")
local HttpService = game:GetService("HttpService")

-- Key Sistemi
local KEY_CODE = "KILASIK2025" -- Anahtar kod
local keyVerified = false

-- Temel değişkenler
local player = Players.LocalPlayer
local mouse = player:GetMouse()
local camera = Workspace.CurrentCamera
local guiCreated = false
local guiVisible = false
local activeTab = "Main"

-- Hız ve karakter kontrolü
local walkSpeed = 16
local jumpPower = 50
local infiniteJump = false
local noclip = false
local flying = false
local flySpeed = 2
local xray = false
local esp = false
local aimbotEnabled = false
local aimbotTarget = nil
local selectedPlayers = {}
local selectedParts = {}

-- GUI Renkleri
local colors = {
    background = Color3.fromRGB(30, 30, 35),
    header = Color3.fromRGB(40, 40, 45),
    button = Color3.fromRGB(50, 50, 60),
    buttonHover = Color3.fromRGB(60, 60, 70),
    buttonSelected = Color3.fromRGB(70, 90, 120),
    text = Color3.fromRGB(240, 240, 240),
    highlight = Color3.fromRGB(70, 130, 180),
    warning = Color3.fromRGB(200, 60, 60),
    success = Color3.fromRGB(60, 180, 75),
    neutralLight = Color3.fromRGB(70, 70, 85),
    neutralDark = Color3.fromRGB(50, 50, 65),
    shadow = Color3.fromRGB(20, 20, 25),
    categoryBG = Color3.fromRGB(35, 35, 45)
}

-- Tüm Komutlar
local commands = {
    -- Ana komutlar
    {name = "Speed", desc = "Karakterin koşma hızını ayarla", category = "Character", func = function(speed) setWalkSpeed(tonumber(speed) or 16) end},
    {name = "JumpPower", desc = "Karakterin zıplama gücünü ayarla", category = "Character", func = function(power) setJumpPower(tonumber(power) or 50) end},
    {name = "InfiniteJump", desc = "Sınırsız zıplama", category = "Character", func = function() toggleInfiniteJump() end},
    {name = "Fly", desc = "Uçma modunu aktifleştir", category = "Character", func = function() toggleFly() end},
    {name = "Noclip", desc = "Duvarlardan geçme modunu aktifleştir", category = "Character", func = function() toggleNoclip() end},
    {name = "XRay", desc = "Duvarları şeffaflaştır", category = "Vision", func = function() toggleXRay() end},
    {name = "ESP", desc = "Oyuncuları ve nesneleri işaretle", category = "Vision", func = function() toggleESP() end},
    {name = "Aimbot", desc = "Otomatik nişan alma", category = "Combat", func = function() toggleAimbot() end},
    {name = "Teleport", desc = "Fare konumuna ışınlan", category = "Utility", func = function() teleportToMouse() end},
    {name = "TpToPlayer", desc = "Belirli bir oyuncuya ışınlan", category = "Utility", func = function(playerName) teleportToPlayer(playerName) end},
    {name = "Rejoin", desc = "Aynı sunucuya tekrar katıl", category = "Utility", func = function() rejoinServer() end},
    {name = "NoFog", desc = "Sisi kaldır", category = "Vision", func = function() removeFog() end},
    {name = "FullBright", desc = "Tam aydınlatma", category = "Vision", func = function() enableFullBright() end},
    {name = "Invisible", desc = "Karakteri görünmez yap", category = "Character", func = function() makeInvisible() end},
    {name = "RemoveMesh", desc = "Mesh'leri kaldır", category = "Character", func = function() removeMeshes() end},
    
    -- Combat komutları
    {name = "KillAura", desc = "Yakınındaki oyuncuları otomatik vur", category = "Combat", func = function() toggleKillAura() end},
    {name = "InfiniteAmmo", desc = "Sınırsız mermi", category = "Combat", func = function() giveInfiniteAmmo() end},
    {name = "GodMode", desc = "Ölümsüzlük modunu dene", category = "Combat", func = function() attemptGodMode() end},
    {name = "AutoFarm", desc = "Otomatik kaynak toplama", category = "Utility", func = function() toggleAutoFarm() end},
    {name = "Reach", desc = "Silah menzilini artır", category = "Combat", func = function() increaseReach() end},
    
    -- Troll/Eğlence komutları
    {name = "DanceAnimate", desc = "Dans animasyonu", category = "Fun", func = function() playDanceAnimation() end},
    {name = "FakeChat", desc = "Başka bir oyuncu gibi mesaj", category = "Fun", func = function(name, message) fakeChatMessage(name, message) end},
    {name = "GiantSize", desc = "Karakteri dev yap", category = "Fun", func = function() makeGiantSize() end},
    {name = "TinySize", desc = "Karakteri küçült", category = "Fun", func = function() makeTinySize() end},
    {name = "FloatingParts", desc = "Parçaları uçur", category = "Fun", func = function() createFloatingParts() end},
    {name = "SpinCharacter", desc = "Karakteri döndür", category = "Fun", func = function() spinCharacter() end},
    
    -- Oyuncu komutları
    {name = "Spectate", desc = "Bir oyuncuyu izle", category = "Players", func = function(playerName) spectatePlayer(playerName) end},
    {name = "Unspectate", desc = "İzlemeyi durdur", category = "Players", func = function() unspectatePlayer() end},
    {name = "Goto", desc = "Bir oyuncuya git", category = "Players", func = function(playerName) goToPlayer(playerName) end},
    {name = "Bring", desc = "Bir oyuncuyu kendine getir (çoğu oyunda çalışmaz)", category = "Players", func = function(playerName) bringPlayer(playerName) end},
    {name = "FlingPlayer", desc = "Bir oyuncuyu fırlat (çoğu oyunda çalışmaz)", category = "Players", func = function(playerName) flingPlayer(playerName) end},
    
    -- Araçlar
    {name = "CopyPosition", desc = "Pozisyonu kopyala", category = "Utility", func = function() copyPosition() end},
    {name = "BTools", desc = "İnşaat araçları ver", category = "Utility", func = function() giveBTools() end},
    {name = "ForceField", desc = "Koruyucu kalkan", category = "Utility", func = function() applyForceField() end},
    {name = "HighJump", desc = "Çok yükseğe zıpla", category = "Character", func = function() doHighJump() end},
    {name = "SwimMode", desc = "Havada yüzme modu", category = "Character", func = function() toggleSwimMode() end},
    
    -- Görsel komutlar
    {name = "Rainbow", desc = "Gökkuşağı karakter", category = "Visuals", func = function() makeRainbowCharacter() end},
    {name = "ClearMap", desc = "Haritayı temizle", category = "Visuals", func = function() clearMap() end},
    {name = "LowGraphics", desc = "Düşük grafik ayarları", category = "Visuals", func = function() setLowGraphics() end},
    {name = "RemoveTextures", desc = "Dokuları kaldır", category = "Visuals", func = function() removeTextures() end},
    {name = "ShowHitboxes", desc = "Vuruş kutularını göster", category = "Visuals", func = function() showHitboxes() end},
}

-- Kategoriler
local categories = {
    "Main",
    "Character",
    "Combat",
    "Vision",
    "Players",
    "Utility",
    "Fun",
    "Visuals",
    "Settings"
}

-- =====================
-- Fonksiyon Tanımları
-- =====================

-- Yürüme hızını ayarla
function setWalkSpeed(speed)
    if not player.Character or not player.Character:FindFirstChild("Humanoid") then return end
    player.Character.Humanoid.WalkSpeed = speed
    walkSpeed = speed
    setStatus("Yürüme hızı " .. speed .. " olarak ayarlandı")
end

-- Zıplama gücünü ayarla
function setJumpPower(power)
    if not player.Character or not player.Character:FindFirstChild("Humanoid") then return end
    player.Character.Humanoid.JumpPower = power
    jumpPower = power
    setStatus("Zıplama gücü " .. power .. " olarak ayarlandı")
end

-- Sonsuz zıplama
function toggleInfiniteJump()
    infiniteJump = not infiniteJump
    
    if infiniteJump then
        setStatus("Sonsuz zıplama aktif")
    else
        setStatus("Sonsuz zıplama deaktif")
    end
end

-- Noclip (duvarlardan geçme)
function toggleNoclip()
    noclip = not noclip
    
    if noclip then
        local noclipLoop = RunService.Stepped:Connect(function()
            if not noclip then noclipLoop:Disconnect() return end
            
            if player.Character then
                for _, part in pairs(player.Character:GetDescendants()) do
                    if part:IsA("BasePart") and part.CanCollide then
                        part.CanCollide = false
                    end
                end
            end
        end)
        setStatus("Noclip aktif")
    else
        if player.Character then
            for _, part in pairs(player.Character:GetDescendants()) do
                if part:IsA("BasePart") and part.Name ~= "HumanoidRootPart" then
                    part.CanCollide = true
                end
            end
        end
        setStatus("Noclip deaktif")
    end
end

-- Uçma modu
function toggleFly()
    flying = not flying
    
    if flying then
        -- Uçma kodunu başlat
        local flyPart = Instance.new("BodyVelocity")
        flyPart.Velocity = Vector3.new(0, 0, 0)
        flyPart.MaxForce = Vector3.new(math.huge, math.huge, math.huge)
        flyPart.Name = "FlyPart"
        
        -- Karakter hareketi
        local controls = {
            f = false,
            b = false,
            l = false,
            r = false,
            q = false,
            e = false
        }
        
        local controlsChanged = {}
        
        -- Klavye kontrolleri
        controlsChanged.w = UserInputService.InputBegan:Connect(function(input)
            if input.KeyCode == Enum.KeyCode.W then controls.f = true end
            if input.KeyCode == Enum.KeyCode.S then controls.b = true end
            if input.KeyCode == Enum.KeyCode.A then controls.l = true end
            if input.KeyCode == Enum.KeyCode.D then controls.r = true end
            if input.KeyCode == Enum.KeyCode.Q then controls.q = true end
            if input.KeyCode == Enum.KeyCode.E then controls.e = true end
        end)
        
        controlsChanged.s = UserInputService.InputEnded:Connect(function(input)
            if input.KeyCode == Enum.KeyCode.W then controls.f = false end
            if input.KeyCode == Enum.KeyCode.S then controls.b = false end
            if input.KeyCode == Enum.KeyCode.A then controls.l = false end
            if input.KeyCode == Enum.KeyCode.D then controls.r = false end
            if input.KeyCode == Enum.KeyCode.Q then controls.q = false end
            if input.KeyCode == Enum.KeyCode.E then controls.e = false end
        end)
        
        local function fly()
            if not player.Character or not player.Character:FindFirstChild("HumanoidRootPart") then return end
            
            local rootPart = player.Character.HumanoidRootPart
            local flyPartInstance = rootPart:FindFirstChild("FlyPart") or flyPart:Clone()
            flyPartInstance.Parent = rootPart
            
            local flyLoop
            flyLoop = RunService.Heartbeat:Connect(function()
                if not flying then 
                    flyLoop:Disconnect()
                    if flyPartInstance and flyPartInstance.Parent then
                        flyPartInstance:Destroy()
                    end
                    player.Character.Humanoid.PlatformStand = false
                    return 
                end
                
                player.Character.Humanoid.PlatformStand = true
                
                local direction = Vector3.new(0, 0, 0)
                
                -- Kamera yönüne göre hareket
                local lookVector = camera.CFrame.LookVector
                local rightVector = camera.CFrame.RightVector
                
                if controls.f then
                    direction = direction + lookVector
                end
                if controls.b then
                    direction = direction - lookVector
                end
                if controls.r then
                    direction = direction + rightVector
                end
                if controls.l then
                    direction = direction - rightVector
                end
                if controls.q then
                    direction = direction + Vector3.new(0, 1, 0)
                end
                if controls.e then
                    direction = direction + Vector3.new(0, -1, 0)
                end
                
                if direction.Magnitude > 0 then
                    direction = direction.Unit
                end
                
                flyPartInstance.Velocity = direction * flySpeed * 50
            end)
        end
        
        fly()
        setStatus("Uçma modu aktif - WASDQE tuşlarını kullan")
    else
        -- Uçma modunu kapat
        if player.Character and player.Character:FindFirstChild("HumanoidRootPart") then
            local flyPartInstance = player.Character.HumanoidRootPart:FindFirstChild("FlyPart")
            if flyPartInstance then
                flyPartInstance:Destroy()
            end
        end
        
        if player.Character and player.Character:FindFirstChild("Humanoid") then
            player.Character.Humanoid.PlatformStand = false
        end
        
        setStatus("Uçma modu deaktif")
    end
end

-- X-Ray (duvarları görme)
function toggleXRay()
    xray = not xray
    
    if xray then
        -- Duvarların şeffaflığını ayarla
        for _, part in ipairs(Workspace:GetDescendants()) do
            if part:IsA("BasePart") and not part:IsDescendantOf(player.Character) and part.Transparency < 0.8 and not part:IsA("Terrain") then
                if not part:FindFirstChild("OriginalTransparency") then
                    local originalValue = Instance.new("NumberValue")
                    originalValue.Name = "OriginalTransparency"
                    originalValue.Value = part.Transparency
                    originalValue.Parent = part
                end
                part.Transparency = 0.8
            end
        end
        setStatus("X-Ray aktif")
    else
        -- Duvarların şeffaflığını geri al
        for _, part in ipairs(Workspace:GetDescendants()) do
            if part:IsA("BasePart") and part:FindFirstChild("OriginalTransparency") then
                part.Transparency = part.OriginalTransparency.Value
                part.OriginalTransparency:Destroy()
            end
        end
        setStatus("X-Ray deaktif")
    end
end

-- ESP (oyuncuları ve nesneleri görme)
function toggleESP()
    esp = not esp
    
    if esp then
        -- ESP kodunu başlat
        local espLoop
        espLoop = RunService.RenderStepped:Connect(function()
            if not esp then 
                espLoop:Disconnect()
                -- Mevcut ESP öğelerini temizle
                for _, player in ipairs(Players:GetPlayers()) do
                    if player.Character then
                        for _, part in ipairs(player.Character:GetDescendants()) do
                            if part:IsA("BoxHandleAdornment") and part.Name == "ESPBox" then
                                part:Destroy()
                            end
                        end
                    end
                end
                return 
            end
            
            -- Diğer oyuncular için ESP uygula
            for _, otherPlayer in ipairs(Players:GetPlayers()) do
                if otherPlayer ~= player and otherPlayer.Character and otherPlayer.Character:FindFirstChild("HumanoidRootPart") and otherPlayer.Character:FindFirstChild("Humanoid") then
                    -- Zaten ESP kutusu var mı kontrol et
                    local hasESP = false
                    for _, part in ipairs(otherPlayer.Character:GetDescendants()) do
                        if part:IsA("BoxHandleAdornment") and part.Name == "ESPBox" then
                            hasESP = true
                            break
                        end
                    end
                    
                    if not hasESP then
                        -- Her oyuncu için ESP kutusu ekle
                        for _, part in ipairs(otherPlayer.Character:GetDescendants()) do
                            if part:IsA("BasePart") then
                                local box = Instance.new("BoxHandleAdornment")
                                box.Name = "ESPBox"
                                box.Adornee = part
                                box.AlwaysOnTop = true
                                box.ZIndex = 10
                                box.Size = part.Size
                                box.Transparency = 0.5
                                
                                -- Takım renkleri
                                if otherPlayer.Team and player.Team then
                                    if otherPlayer.Team == player.Team then
                                        box.Color3 = Color3.fromRGB(0, 255, 0) -- Yeşil (takım arkadaşı)
                                    else
                                        box.Color3 = Color3.fromRGB(255, 0, 0) -- Kırmızı (düşman)
                                    end
                                else
                                    box.Color3 = Color3.fromRGB(255, 170, 0) -- Turuncu (nötr)
                                end
                                
                                box.Parent = part
                            end
                        end
                        
                        -- Bilgi etiketini ekle
                        local billboardGui = Instance.new("BillboardGui")
                        billboardGui.Name = "ESPTag"
                        billboardGui.Adornee = otherPlayer.Character.Head
                        billboardGui.Size = UDim2.new(0, 100, 0, 40)
                        billboardGui.StudsOffset = Vector3.new(0, 2, 0)
                        billboardGui.AlwaysOnTop = true
                        
                        local nameLabel = Instance.new("TextLabel")
                        nameLabel.BackgroundTransparency = 1
                        nameLabel.Size = UDim2.new(1, 0, 0.5, 0)
                        nameLabel.Font = Enum.Font.GothamSemibold
                        nameLabel.TextSize = 14
                        nameLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
                        nameLabel.TextStrokeColor3 = Color3.fromRGB(0, 0, 0)
                        nameLabel.TextStrokeTransparency = 0.3
                        nameLabel.Text = otherPlayer.Name
                        nameLabel.Parent = billboardGui
                        
                        local distanceLabel = Instance.new("TextLabel")
                        distanceLabel.BackgroundTransparency = 1
                        distanceLabel.Size = UDim2.new(1, 0, 0.5, 0)
                        distanceLabel.Position = UDim2.new(0, 0, 0.5, 0)
                        distanceLabel.Font = Enum.Font.Gotham
                        distanceLabel.TextSize = 12
                        distanceLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
                        distanceLabel.TextStrokeColor3 = Color3.fromRGB(0, 0, 0)
                        distanceLabel.TextStrokeTransparency = 0.3
                        distanceLabel.Parent = billboardGui
                        
                        billboardGui.Parent = otherPlayer.Character.Head
                        
                        -- Mesafe bilgisini güncelle
                        local updateDistanceLoop
                        updateDistanceLoop = RunService.Heartbeat:Connect(function()
                            if otherPlayer.Character and player.Character and 
                               otherPlayer.Character:FindFirstChild("HumanoidRootPart") and
                               player.Character:FindFirstChild("HumanoidRootPart") then
                                
                                local distance = (otherPlayer.Character.HumanoidRootPart.Position - player.Character.HumanoidRootPart.Position).Magnitude
                                distanceLabel.Text = string.format("%.0f studs", distance)
                            else
                                updateDistanceLoop:Disconnect()
                            end
                        end)
                    end
                end
            end
        end)
        setStatus("ESP aktif")
    else
        -- ESP kodunu devre dışı bırak, öğeleri temizle
        for _, plyr in ipairs(Players:GetPlayers()) do
            if plyr.Character then
                for _, part in ipairs(plyr.Character:GetDescendants()) do
                    if (part:IsA("BoxHandleAdornment") and part.Name == "ESPBox") or 
                       (part:IsA("BillboardGui") and part.Name == "ESPTag") then
                        part:Destroy()
                    end
                end
            end
        end
        setStatus("ESP deaktif")
    end
end

-- Aimbot (otomatik nişan alma)
function toggleAimbot()
    aimbotEnabled = not aimbotEnabled
    
    if aimbotEnabled then
        local aimbotLoop
        aimbotLoop = RunService.RenderStepped:Connect(function()
            if not aimbotEnabled then 
                aimbotLoop:Disconnect()
                return 
            end
            
            local closestPlayer = nil
            local shortestDistance = math.huge
            
            -- En yakın oyuncuyu bul
            for _, otherPlayer in ipairs(Players:GetPlayers()) do
                if otherPlayer ~= player and otherPlayer.Character and
                   otherPlayer.Character:FindFirstChild("Humanoid") and
                   otherPlayer.Character.Humanoid.Health > 0 and
                   otherPlayer.Character:FindFirstChild("HumanoidRootPart") and
                   otherPlayer.Character:FindFirstChild("Head") then
                    
                    -- Ekranda göründüğünü kontrol et
                    local head = otherPlayer.Character.Head
                    local headPosition = head.Position
                    local screenPoint = camera:WorldToScreenPoint(headPosition)
                    
                    if screenPoint.Z > 0 then
                        local vector = Vector2.new(screenPoint.X - mouse.X, screenPoint.Y - mouse.Y)
                        local distance = vector.Magnitude
                        
                        -- Ekranın merkezine en yakın oyuncuyu seç
                        if distance < shortestDistance then
                            shortestDistance = distance
                            closestPlayer = otherPlayer
                        end
                    end
                end
            end
            
            -- En yakın oyuncuya bak
            if closestPlayer and shortestDistance < 300 then
                aimbotTarget = closestPlayer
                camera.CFrame = CFrame.new(camera.CFrame.Position, closestPlayer.Character.Head.Position)
            else
                aimbotTarget = nil
            end
        end)
        setStatus("Aimbot aktif")
    else
        aimbotTarget = nil
        setStatus("Aimbot deaktif")
    end
end

-- Fare konumuna ışınlanma
function teleportToMouse()
    local mousePos = mouse.Hit.Position
    if player.Character and player.Character:FindFirstChild("HumanoidRootPart") then
        player.Character.HumanoidRootPart.CFrame = CFrame.new(mousePos + Vector3.new(0, 5, 0))
        setStatus("Fare konumuna ışınlandın")
    else
        setStatus("Işınlanma başarısız: Karakter bulunamadı")
    end
end

-- Oyuncuya ışınlanma
function teleportToPlayer(targetName)
    local targetPlayer = nil
    
    for _, plyr in ipairs(Players:GetPlayers()) do
        if plyr.Name:lower():find(targetName:lower()) then
            targetPlayer = plyr
            break
        end
    end
    
    if targetPlayer and targetPlayer.Character and targetPlayer.Character:FindFirstChild("HumanoidRootPart") and
       player.Character and player.Character:FindFirstChild("HumanoidRootPart") then
        player.Character.HumanoidRootPart.CFrame = targetPlayer.Character.HumanoidRootPart.CFrame * CFrame.new(0, 0, 2)
        setStatus(targetPlayer.Name .. " adlı oyuncuya ışınlandın")
    else
        setStatus("Oyuncu bulunamadı veya ışınlanılamadı")
    end
end

-- Sunucuya yeniden bağlan
function rejoinServer()
    setStatus("Sunucuya yeniden bağlanılıyor...")
    TeleportService:TeleportToPlaceInstance(game.PlaceId, game.JobId)
end

-- Sisi kaldır
function removeFog()
    Lighting.FogStart = 100000
    Lighting.FogEnd = 100000
    setStatus("Sis kaldırıldı")
end

-- Tam aydınlatma
function enableFullBright()
    local oldAmbient = Lighting.Ambient
    Lighting.Ambient = Color3.fromRGB(255, 255, 255)
    Lighting.Brightness = 2
    Lighting.ClockTime = 14
    Lighting.FogEnd = 100000
    Lighting.GlobalShadows = false
    Lighting.OutdoorAmbient = Color3.fromRGB(255, 255, 255)
    
    setStatus("Tam aydınlatma etkinleştirildi")
end

-- Görünmezlik
function makeInvisible()
    if player.Character then
        for _, part in pairs(player.Character:GetDescendants()) do
            if part:IsA("BasePart") or part:IsA("Decal") and part.Name ~= "HumanoidRootPart" then
                part.Transparency = 1
            end
        end
        setStatus("Görünmezlik etkinleştirildi (yarı-görünmezlik)")
    end
end

-- Meshes'leri kaldır
function removeMeshes()
    if player.Character then
        for _, part in pairs(player.Character:GetDescendants()) do
            if part:IsA("SpecialMesh") or part:IsA("Mesh") or part:IsA("MeshPart") then
                part:Destroy()
            end
        end
        setStatus("Mesh'ler kaldırıldı")
    end
end

-- KillAura
function toggleKillAura()
    local killAuraEnabled = not (getgenv().KillAuraConnection ~= nil)
    
    if killAuraEnabled then
        local range = 15 -- Vuruş menzili
        
        -- KillAura döngüsü
        getgenv().KillAuraConnection = RunService.Heartbeat:Connect(function()
            for _, otherPlayer in ipairs(Players:GetPlayers()) do
                if otherPlayer ~= player and otherPlayer.Character and player.Character and
                   otherPlayer.Character:FindFirstChild("Humanoid") and
                   otherPlayer.Character.Humanoid.Health > 0 and
                   otherPlayer.Character:FindFirstChild("HumanoidRootPart") and
                   player.Character:FindFirstChild("HumanoidRootPart") then
                    
                    local distance = (otherPlayer.Character.HumanoidRootPart.Position - player.Character.HumanoidRootPart.Position).Magnitude
                    
                    if distance <= range then
                        -- Silahı bul ve ateş et veya kılıcı bul ve vur
                        for _, tool in pairs(player.Character:GetChildren()) do
                            if tool:IsA("Tool") and (tool:FindFirstChild("Handle") or tool:FindFirstChild("Blade")) then
                                -- Remote event'i etkinleştir (oyunlar arasında değişebilir)
                                local handlePart = tool:FindFirstChild("Handle") or tool:FindFirstChild("Blade")
                                
                                -- Yakındaki oyuncuya farklı yöntemlerle vurmayı dene 
                                -- (Not: Bu her oyunda çalışmayabilir)
                                
                                -- Yöntem 1: Doğrudan vurma
                                if tool.Name:lower():find("sword") or tool.Name:lower():find("knife") then
                                    tool:Activate()
                                    -- Vuruş için silahı hedefle
                                    handlePart.CFrame = otherPlayer.Character.HumanoidRootPart.CFrame
                                end
                                
                                -- Yöntem 2: Remote event kullanma
                                for _, event in pairs(tool:GetDescendants()) do
                                    if event:IsA("RemoteEvent") and (event.Name:lower():find("hit") or event.Name:lower():find("damage")) then
                                        event:FireServer(otherPlayer.Character.HumanoidRootPart)
                                    end
                                end
                                
                                -- Yöntem 3: Serverside olayını taklit etme
                                for _, event in pairs(ReplicatedStorage:GetDescendants()) do
                                    if event:IsA("RemoteEvent") and (event.Name:lower():find("damage") or event.Name:lower():find("hit")) then
                                        event:FireServer(otherPlayer.Character.HumanoidRootPart)
                                    end
                                end
                            end
                        end
                    end
                end
            end
        end)
        
        setStatus("KillAura aktif - 15 birim menzilli")
    else
        if getgenv().KillAuraConnection then
            getgenv().KillAuraConnection:Disconnect()
            getgenv().KillAuraConnection = nil
        end
        
        setStatus("KillAura deaktif")
    end
end

-- Sonsuz mermi
function giveInfiniteAmmo()
    local gunHook
    gunHook = hookmetamethod(game, "__namecall", function(self, ...)
        local args = {...}
        local method = getnamecallmethod()
        
        if method == "FireServer" and self.Name:lower():find("ammo") or self.Name:lower():find("bullet") then
            -- Mermi sayısı hook'u
            return
        end
        
        return gunHook(self, ...)
    end)
    
    setStatus("Sonsuz mermi aktifleştirildi (bazı oyunlarda çalışmayabilir)")
end

-- God Mode (ölümsüzlük modu)
function attemptGodMode()
    if player.Character and player.Character:FindFirstChild("Humanoid") then
        -- Yöntem 1: Humanoid verilerini kopyala
        local humanoid = player.Character.Humanoid
        local cloneHum = humanoid:Clone()
        humanoid.Name = "1"
        cloneHum.Parent = player.Character
        humanoid:Destroy()
        cloneHum.Name = "Humanoid"
        
        -- Yöntem 2: BreakJoints ataklarını engelle
        player.Character.Humanoid.BreakJointsOnDeath = false
        
        -- Yöntem 3: Health degerini koru
        local healthHook
        healthHook = hookmetamethod(game, "__index", function(self, key)
            if self == player.Character.Humanoid and key == "Health" then
                return 100
            end
            return healthHook(self, key)
        end)
        
        setStatus("God Mode aktifleştirilmeye çalışıldı (bazı oyunlarda çalışmayabilir)")
    end
end

-- Otomatik Kaynak Toplama
function toggleAutoFarm()
    local autoFarmEnabled = not (getgenv().AutoFarmConnection ~= nil)
    
    if autoFarmEnabled then
        -- Ortak kaynak isimlerini belirle
        local resourceNames = {
            "Coin", "Gem", "Diamond", "Cash", "Money", "Gold", "Silver", "Bronze",
            "Chest", "Crate", "Box", "Ore", "Resource", "Collectible", "Pickup",
            "XP", "Exp", "Experience", "Points", "Token"
        }
        
        getgenv().AutoFarmConnection = RunService.Heartbeat:Connect(function()
            if not player.Character or not player.Character:FindFirstChild("HumanoidRootPart") then
                return
            end
            
            local rootPart = player.Character.HumanoidRootPart
            local closestResource = nil
            local shortestDistance = 50 -- Maksimum mesafe
            
            -- İlk olarak workspace'de arama yap
            for _, child in ipairs(workspace:GetDescendants()) do
                if child:IsA("BasePart") or child:IsA("Model") then
                    local isResource = false
                    
                    -- İsim kontrolü
                    for _, resourceName in ipairs(resourceNames) do
                        if child.Name:lower():find(resourceName:lower()) or 
                           (child.Parent and child.Parent.Name:lower():find(resourceName:lower())) then
                            isResource = true
                            break
                        end
                    end
                    
                    -- Fiziksel özellik kontrolü (pırıltı, dönme hareketi, vb.)
                    if not isResource and child:IsA("BasePart") then
                        if child:FindFirstChildOfClass("ParticleEmitter") or
                           child:FindFirstChildOfClass("PointLight") or
                           child:FindFirstChildOfClass("Sparkles") then
                            isResource = true
                        end
                        
                        -- Renge göre de kontrol edebiliriz
                        if not isResource and (
                            child.BrickColor == BrickColor.new("Bright yellow") or -- Altın/Para rengi
                            child.BrickColor == BrickColor.new("Bright blue") or   -- Değerli taş rengi
                            child.BrickColor == BrickColor.new("New Yeller")       -- Para rengi
                        ) then
                            isResource = true
                        end
                    end
                    
                    if isResource then
                        local targetPosition = child:IsA("Model") and child:GetModelCFrame().Position or child.Position
                        local distance = (targetPosition - rootPart.Position).Magnitude
                        
                        if distance < shortestDistance then
                            shortestDistance = distance
                            closestResource = child
                        end
                    end
                end
            end
            
            -- Eğer bir kaynak bulunduysa otomatik topla
            if closestResource then
                local targetPosition = closestResource:IsA("Model") and closestResource:GetModelCFrame().Position or closestResource.Position
                
                -- Kaynağa doğru hareket et
                player.Character.Humanoid:MoveTo(targetPosition)
                
                -- Çok yakınsa direk üzerine ışınlan (daha hızlı toplama için)
                if shortestDistance < 10 then
                    rootPart.CFrame = CFrame.new(targetPosition)
                end
                
                -- Kaynağın üzerine bas (remoteEvents ile etkileşimde bulun)
                -- Touch interest sistemini tetikle
                firetouchinterest(rootPart, closestResource, 0)
                wait(0.1)
                firetouchinterest(rootPart, closestResource, 1)
                
                -- RemoteEvent'ler üzerinde deneme yap
                for _, event in pairs(closestResource:GetDescendants()) do
                    if event:IsA("RemoteEvent") and (event.Name:lower():find("collect") or event.Name:lower():find("pickup") or event.Name:lower():find("grab")) then
                        event:FireServer()
                    end
                end
            end
        end)
        
        setStatus("Otomatik kaynak toplama aktif")
    else
        if getgenv().AutoFarmConnection then
            getgenv().AutoFarmConnection:Disconnect()
            getgenv().AutoFarmConnection = nil
        end
        
        setStatus("Otomatik kaynak toplama devre dışı")
    end
end

-- Silah menzilini artır
function increaseReach()
    local oldNamecall
    oldNamecall = hookmetamethod(game, "__namecall", function(self, ...)
        local args = {...}
        local method = getnamecallmethod()
        
        if method == "FireServer" and string.find(self.Name:lower(), "hit") or string.find(self.Name:lower(), "damage") then
            -- Argümanları kontrol et ve gerekirse değiştir
            for i, v in pairs(args) do
                if typeof(v) == "Vector3" then
                    -- Menzili arttır
                    args[i] = player.Character.HumanoidRootPart.Position + (v - player.Character.HumanoidRootPart.Position).unit * 30
                end
                
                if typeof(v) == "Instance" and v:IsA("BasePart") then
                    -- En yakın oyuncuyu bul
                    local closestPlayer = nil
                    local shortestDistance = 20 -- Artırılmış menzil
                    
                    for _, otherPlayer in ipairs(Players:GetPlayers()) do
                        if otherPlayer ~= player and otherPlayer.Character and otherPlayer.Character:FindFirstChild("HumanoidRootPart") then
                            local distance = (otherPlayer.Character.HumanoidRootPart.Position - player.Character.HumanoidRootPart.Position).Magnitude
                            
                            if distance < shortestDistance then
                                shortestDistance = distance
                                closestPlayer = otherPlayer
                            end
                        end
                    end
                    
                    if closestPlayer then
                        args[i] = closestPlayer.Character.HumanoidRootPart
                    end
                end
            end
            
            return oldNamecall(self, unpack(args))
        end
        
        return oldNamecall(self, ...)
    end)
    
    setStatus("Silah menzili artırıldı (bazı oyunlarda çalışmayabilir)")
end

-- Dans animasyonu oynat
function playDanceAnimation()
    local animations = {
        "rbxassetid://507771019", -- Shuffle
        "rbxassetid://429703734", -- Moonwalk
        "rbxassetid://35654637",  -- Thriller
        "rbxassetid://129423030", -- Breakdance
        "rbxassetid://3189773368" -- Floss
    }
    
    if player.Character and player.Character:FindFirstChild("Humanoid") then
        local animationIndex = math.random(1, #animations)
        local anim = Instance.new("Animation")
        anim.AnimationId = animations[animationIndex]
        
        local animTrack = player.Character.Humanoid:LoadAnimation(anim)
        animTrack:Play()
        
        setStatus("Dans animasyonu oynatılıyor")
    end
end

-- Sahte sohbet mesajı
function fakeChatMessage(targetName, message)
    local targetPlayer = nil
    
    for _, plyr in ipairs(Players:GetPlayers()) do
        if plyr.Name:lower():find(targetName:lower()) then
            targetPlayer = plyr
            break
        end
    end
    
    if not targetPlayer then
        setStatus("Oyuncu bulunamadı")
        return
    end
    
    -- Chat geçmişi arayüzünü bul
    local chatGui = nil
    
    for _, gui in ipairs(player.PlayerGui:GetChildren()) do
        if gui.Name:lower():find("chat") then
            chatGui = gui
            break
        end
    end
    
    if not chatGui then
        setStatus("Sohbet arayüzü bulunamadı")
        return
    end
    
    -- Sahte mesaj oluştur
    local fakeMessageFrame = Instance.new("Frame")
    fakeMessageFrame.Size = UDim2.new(1, 0, 0, 20)
    fakeMessageFrame.BackgroundTransparency = 1
    
    local fakeMessageText = Instance.new("TextLabel")
    fakeMessageText.Size = UDim2.new(1, 0, 1, 0)
    fakeMessageText.BackgroundTransparency = 1
    fakeMessageText.Font = Enum.Font.SourceSans
    fakeMessageText.TextSize = 16
    fakeMessageText.TextXAlignment = Enum.TextXAlignment.Left
    fakeMessageText.TextColor3 = Color3.fromRGB(255, 255, 255)
    
    -- Takım renklerine göre ayarla
    if targetPlayer.Team then
        fakeMessageText.TextColor3 = targetPlayer.TeamColor.Color
    end
    
    fakeMessageText.Text = targetPlayer.Name .. ": " .. message
    fakeMessageText.Parent = fakeMessageFrame
    
    -- Mesajı chat geçmişine ekle
    for _, child in ipairs(chatGui:GetDescendants()) do
        if child:IsA("ScrollingFrame") and child.Name:lower():find("chat") or child.Name:lower():find("message") then
            fakeMessageFrame.Parent = child
            break
        end
    end
    
    setStatus("Sahte mesaj gönderildi")
    
    -- Bir süre sonra mesajı kaldır
    delay(10, function()
        fakeMessageFrame:Destroy()
    end)
end

-- Dev karakter yap
function makeGiantSize()
    if player.Character then
        for _, part in pairs(player.Character:GetDescendants()) do
            if part:IsA("BasePart") then
                part.Size = part.Size * 3
            end
        end
        
        if player.Character:FindFirstChild("Humanoid") then
            player.Character.Humanoid.HipHeight = player.Character.Humanoid.HipHeight * 3
        end
        
        setStatus("Karakter büyütüldü")
    end
end

-- Küçük karakter yap
function makeTinySize()
    if player.Character then
        for _, part in pairs(player.Character:GetDescendants()) do
            if part:IsA("BasePart") then
                part.Size = part.Size * 0.5
            end
        end
        
        if player.Character:FindFirstChild("Humanoid") then
            player.Character.Humanoid.HipHeight = player.Character.Humanoid.HipHeight * 0.5
        end
        
        setStatus("Karakter küçültüldü")
    end
end

-- Uçan parçalar oluştur
function createFloatingParts()
    local parts = {}
    local colors = {
        Color3.fromRGB(255, 0, 0),
        Color3.fromRGB(0, 255, 0),
        Color3.fromRGB(0, 0, 255),
        Color3.fromRGB(255, 255, 0),
        Color3.fromRGB(0, 255, 255),
        Color3.fromRGB(255, 0, 255)
    }
    
    -- 20 parça oluştur
    for i = 1, 20 do
        local part = Instance.new("Part")
        part.Size = Vector3.new(1, 1, 1)
        part.Anchored = true
        part.CanCollide = false
        part.BrickColor = BrickColor.new(colors[math.random(1, #colors)])
        part.Material = Enum.Material.Neon
        part.Shape = Enum.PartType.Ball
        part.Parent = workspace
        
        table.insert(parts, part)
    end
    
    -- Parçaları oyuncunun etrafında döndür
    local angle = 0
    local radius = 5
    local angleStep = math.pi * 2 / #parts
    local floatingLoop
    
    floatingLoop = RunService.Heartbeat:Connect(function()
        if not player.Character or not player.Character:FindFirstChild("HumanoidRootPart") then
            -- Oyuncu karakteri kaybolursa parçaları temizle
            for _, part in ipairs(parts) do
                part:Destroy()
            end
            floatingLoop:Disconnect()
            return
        end
        
        angle = angle + 0.03
        
        for i, part in ipairs(parts) do
            local x = math.cos(angle + i * angleStep) * radius
            local y = math.sin(angle * 0.5) * 2 + 4
            local z = math.sin(angle + i * angleStep) * radius
            
            part.Position = player.Character.HumanoidRootPart.Position + Vector3.new(x, y, z)
        end
    end)
    
    -- 30 saniye sonra parçaları temizle
    delay(30, function()
        floatingLoop:Disconnect()
        for _, part in ipairs(parts) do
            part:Destroy()
        end
    end)
    
    setStatus("Uçan parçalar oluşturuldu (30 saniye)")
end

-- Karakteri döndür
function spinCharacter()
    if player.Character and player.Character:FindFirstChild("HumanoidRootPart") then
        local spinSpeed = 10 -- dönüş hızı
        local isSpinning = true
        
        local spinLoop
        spinLoop = RunService.Heartbeat:Connect(function()
            if not isSpinning or not player.Character or not player.Character:FindFirstChild("HumanoidRootPart") then
                spinLoop:Disconnect()
                return
            end
            
            player.Character.HumanoidRootPart.CFrame = player.Character.HumanoidRootPart.CFrame * CFrame.Angles(0, math.rad(spinSpeed), 0)
        end)
        
        -- 10 saniye sonra dönmeyi durdur
        delay(10, function()
            isSpinning = false
            setStatus("Döndürme durduruldu")
        end)
        
        setStatus("Karakter döndürülüyor (10 saniye)")
    end
end

-- Bir oyuncuyu izle
function spectatePlayer(targetName)
    local targetPlayer = nil
    
    for _, plyr in ipairs(Players:GetPlayers()) do
        if plyr.Name:lower():find(targetName:lower()) then
            targetPlayer = plyr
            break
        end
    end
    
    if targetPlayer and targetPlayer.Character then
        workspace.CurrentCamera.CameraSubject = targetPlayer.Character.Humanoid
        setStatus(targetPlayer.Name .. " adlı oyuncu izleniyor")
    else
        setStatus("Oyuncu bulunamadı")
    end
end

-- İzlemeyi durdur
function unspectatePlayer()
    if player.Character and player.Character:FindFirstChild("Humanoid") then
        workspace.CurrentCamera.CameraSubject = player.Character.Humanoid
        setStatus("İzleme modu kapatıldı")
    end
end

-- Oyuncuya git
function goToPlayer(targetName)
    teleportToPlayer(targetName) -- Aynı fonksiyonu kullan
end

-- Oyuncuyu kendine getir
function bringPlayer(targetName)
    local targetPlayer = nil
    
    for _, plyr in ipairs(Players:GetPlayers()) do
        if plyr.Name:lower():find(targetName:lower()) then
            targetPlayer = plyr
            break
        end
    end
    
    if targetPlayer and targetPlayer.Character and targetPlayer.Character:FindFirstChild("HumanoidRootPart") and
       player.Character and player.Character:FindFirstChild("HumanoidRootPart") then
        
        -- Not: Bu fonksiyon çoğu oyunda çalışmaz - oyunlar arası koruma vardır
        
        -- Yöntem 1: Pozisyonu değiştirmeyi dene
        targetPlayer.Character.HumanoidRootPart.CFrame = player.Character.HumanoidRootPart.CFrame * CFrame.new(0, 0, 3)
        
        -- Yöntem 2: Uzaktan etkilemeyi dene
        if targetPlayer.Character:FindFirstChildOfClass("Tool") then
            local tool = targetPlayer.Character:FindFirstChildOfClass("Tool")
            local handle = tool:FindFirstChild("Handle")
            
            if handle then
                handle.CFrame = player.Character.HumanoidRootPart.CFrame
            end
        end
        
        setStatus("Oyuncuyu getirme denendi (çoğu oyunda çalışmaz)")
    else
        setStatus("Oyuncu bulunamadı veya getirilemedi")
    end
end

-- Oyuncuyu fırlat
function flingPlayer(targetName)
    local targetPlayer = nil
    
    for _, plyr in ipairs(Players:GetPlayers()) do
        if plyr.Name:lower():find(targetName:lower()) then
            targetPlayer = plyr
            break
        end
    end
    
    if targetPlayer and targetPlayer.Character and targetPlayer.Character:FindFirstChild("HumanoidRootPart") and
       player.Character and player.Character:FindFirstChild("HumanoidRootPart") then
        
        -- Not: Bu fonksiyon çoğu oyunda çalışmaz - oyunlar arası koruma vardır
        
        -- Konumu sakla
        local oldPos = player.Character.HumanoidRootPart.CFrame
        
        -- Karakter hızını artır
        player.Character.Humanoid.WalkSpeed = 100
        
        -- Hedef oyuncuya doğru koş
        player.Character.Humanoid:MoveTo(targetPlayer.Character.HumanoidRootPart.Position)
        
        -- Çarpma etkisini artır
        local bodyVelocity = Instance.new("BodyVelocity")
        bodyVelocity.Velocity = Vector3.new(0, 0, 0)
        bodyVelocity.MaxForce = Vector3.new(math.huge, math.huge, math.huge)
        bodyVelocity.P = math.huge
        bodyVelocity.Parent = player.Character.HumanoidRootPart
        
        -- Bekle ve çarpışmadan hemen sonra çarpışmayı artır
        delay(0.5, function()
            bodyVelocity.Velocity = player.Character.HumanoidRootPart.CFrame.LookVector * 500
            bodyVelocity.Parent = targetPlayer.Character.HumanoidRootPart
            
            -- 1 saniye sonra temizle ve eski konuma dön
            delay(1, function()
                bodyVelocity:Destroy()
                player.Character.HumanoidRootPart.CFrame = oldPos
                player.Character.Humanoid.WalkSpeed = 16
            end)
        end)
        
        setStatus("Oyuncuyu fırlatma denendi (çoğu oyunda çalışmaz)")
    else
        setStatus("Oyuncu bulunamadı veya fırlatılamadı")
    end
end

-- Pozisyonu kopyala
function copyPosition()
    if player.Character and player.Character:FindFirstChild("HumanoidRootPart") then
        local position = player.Character.HumanoidRootPart.Position
        local posText = "Vector3.new(" .. tostring(position.X) .. ", " .. tostring(position.Y) .. ", " .. tostring(position.Z) .. ")"
        
        setclipboard(posText)
        setStatus("Pozisyon kopyalandı: " .. posText)
    else
        setStatus("Pozisyon kopyalanamadı")
    end
end

-- BTools ver
function giveBTools()
    local toolNames = {"Move", "Clone", "Delete", "Grab"}
    
    for _, toolName in ipairs(toolNames) do
        local tool = Instance.new("HopperBin")
        tool.Name = toolName
        tool.BinType = Enum.BinType[toolName]
        tool.Parent = player.Backpack
    end
    
    setStatus("BTools verildi")
end

-- Koruyucu kalkan
function applyForceField()
    if player.Character then
        local forceField = Instance.new("ForceField")
        forceField.Parent = player.Character
        
        setStatus("Koruyucu kalkan etkinleştirildi")
    end
end

-- Yüksek zıplama
function doHighJump()
    if player.Character and player.Character:FindFirstChild("Humanoid") and player.Character:FindFirstChild("HumanoidRootPart") then
        local jumpForce = 100
        
        -- Yerden zıpladığını kontrol et
        local isOnGround = player.Character.Humanoid:GetState() == Enum.HumanoidStateType.Running or
                           player.Character.Humanoid:GetState() == Enum.HumanoidStateType.RunningNoPhysics
        
        if isOnGround then
            -- Yukarı doğru güç uygulamak için BodyVelocity kullan
            local bodyVelocity = Instance.new("BodyVelocity")
            bodyVelocity.Velocity = Vector3.new(0, jumpForce, 0)
            bodyVelocity.MaxForce = Vector3.new(0, math.huge, 0)
            bodyVelocity.Parent = player.Character.HumanoidRootPart
            
            -- 0.2 saniye sonra temizle
            delay(0.2, function()
                bodyVelocity:Destroy()
            end)
            
            setStatus("Yüksek zıplama gerçekleştirildi")
        else
            setStatus("Zıplama için yerde olmalısın")
        end
    end
end

-- Havada yüzme modu
function toggleSwimMode()
    local swimModeEnabled = not (getgenv().SwimModeConnection ~= nil)
    
    if swimModeEnabled then
        getgenv().SwimModeConnection = RunService.Heartbeat:Connect(function()
            if player.Character and player.Character:FindFirstChild("Humanoid") then
                -- Humanoid state'i yüzme olarak ayarla
                player.Character.Humanoid:ChangeState(Enum.HumanoidStateType.Swimming)
                
                -- WASD tuşlarıyla 3 boyutlu hareket
                local moveDirection = player.Character.Humanoid.MoveDirection
                
                if moveDirection.Magnitude > 0 then
                    player.Character.HumanoidRootPart.Velocity = camera.CFrame:VectorToWorldSpace(Vector3.new(
                        moveDirection.X * 30,
                        moveDirection.Y * 30,
                        moveDirection.Z * 30
                    ))
                else
                    player.Character.HumanoidRootPart.Velocity = Vector3.new(0, 0, 0)
                end
            end
        end)
        
        setStatus("Havada yüzme modu aktif")
    else
        if getgenv().SwimModeConnection then
            getgenv().SwimModeConnection:Disconnect()
            getgenv().SwimModeConnection = nil
        end
        
        -- Karakterin normal durumuna dön
        if player.Character and player.Character:FindFirstChild("Humanoid") then
            player.Character.Humanoid:ChangeState(Enum.HumanoidStateType.GettingUp)
        end
        
        setStatus("Havada yüzme modu devre dışı")
    end
end

-- Gökkuşağı karakter
function makeRainbowCharacter()
    if player.Character then
        local rainbowSpeed = 2
        local hue = 0
        
        local rainbowLoop
        rainbowLoop = RunService.Heartbeat:Connect(function()
            if not player.Character then
                rainbowLoop:Disconnect()
                return
            end
            
            hue = (hue + rainbowSpeed) % 360
            local color = Color3.fromHSV(hue/360, 1, 1)
            
            for _, part in ipairs(player.Character:GetDescendants()) do
                if part:IsA("BasePart") and part.Name ~= "HumanoidRootPart" then
                    part.Color = color
                end
            end
        end)
        
        -- 30 saniye sonra devre dışı bırak
        delay(30, function()
            rainbowLoop:Disconnect()
            setStatus("Gökkuşağı efekti sonlandırıldı")
        end)
        
        setStatus("Gökkuşağı karakter efekti uygulandı (30 saniye)")
    end
end

-- Haritayı temizle (zararlı olabilir!)
function clearMap()
    -- Oyuncu ve oyun mekanikleri güvenliği için neleri koruyacağımızı belirle
    local protectedNames = {
        "Workspace", "Camera", "Terrain", "SpawnLocation", "Players", "Script", "LocalScript", "StarterPack",
        "StarterGui", "StarterPlayer", "TouchTransmitter"
    }
    
    local function isProtected(obj)
        for _, name in ipairs(protectedNames) do
            if obj.Name:find(name) or obj:IsA(name) or obj:IsDescendantOf(Players) then
                return true
            end
        end
        return false
    end
    
    local removedCount = 0
    local maxRemove = 100 -- Oyunu çökertmemek için güvenlik sınırı
    
    for _, obj in ipairs(workspace:GetDescendants()) do
        if not isProtected(obj) and obj:IsA("BasePart") and obj.Anchored then
            obj.Transparency = 1
            obj.CanCollide = false
            removedCount = removedCount + 1
            
            if removedCount >= maxRemove then
                break
            end
        end
    end
    
    setStatus("Haritadaki " .. removedCount .. " öğe gizlendi (şeffaf yapıldı)")
end

-- Düşük grafik ayarları
function setLowGraphics()
    -- Grafik kalitesini düşür
    settings().Rendering.QualityLevel = 1
    
    -- Shadows, efektler ve parçacıkları kapat
    game:GetService("Lighting").GlobalShadows = false
    game:GetService("Lighting").ShadowSoftness = 0
    
    -- FPS sınırını kaldır
    setfpscap(9999)
    
    -- Görüş mesafesini azalt
    settings().Rendering.EagerBulkExecution = false
    
    -- Eşyaları daha basitleştir
    for _, part in ipairs(workspace:GetDescendants()) do
        if part:IsA("BasePart") then
            part.Material = Enum.Material.SmoothPlastic
            
            -- Özel efektleri kaldır
            for _, child in ipairs(part:GetChildren()) do
                if child:IsA("ParticleEmitter") or child:IsA("Trail") or child:IsA("Smoke") or child:IsA("Fire") then
                    child.Enabled = false
                end
            end
        end
    end
    
    setStatus("Düşük grafik ayarları uygulandı")
end

-- Dokuları kaldır
function removeTextures()
    for _, obj in ipairs(workspace:GetDescendants()) do
        if obj:IsA("BasePart") then
            obj.Material = Enum.Material.SmoothPlastic
            
            -- Decal, Texture ve diğer görsel öğeleri kaldır
            for _, child in ipairs(obj:GetChildren()) do
                if child:IsA("Decal") or child:IsA("Texture") then
                    child.Transparency = 1
                end
            end
        end
    end
    
    setStatus("Dokular kaldırıldı")
end

-- Vuruş kutularını göster
function showHitboxes()
    local hitboxesEnabled = not (getgenv().HitboxConnection ~= nil)
    
    if hitboxesEnabled then
        local hitboxes = {}
        
        -- Diğer oyuncular için hitbox oluştur
        for _, otherPlayer in ipairs(Players:GetPlayers()) do
            if otherPlayer ~= player and otherPlayer.Character and otherPlayer.Character:FindFirstChild("HumanoidRootPart") then
                for _, part in ipairs(otherPlayer.Character:GetDescendants()) do
                    if part:IsA("BasePart") then
                        local hitbox = Instance.new("BoxHandleAdornment")
                        hitbox.Name = "Hitbox"
                        hitbox.Adornee = part
                        hitbox.Color3 = Color3.fromRGB(255, 0, 0)
                        hitbox.Transparency = 0.7
                        hitbox.AlwaysOnTop = true
                        hitbox.ZIndex = 10
                        hitbox.Size = part.Size
                        hitbox.Parent = part
                        
                        table.insert(hitboxes, hitbox)
                    end
                end
            end
        end
        
        -- Güncelleme döngüsü oluştur
        getgenv().HitboxConnection = RunService.Heartbeat:Connect(function()
            for _, otherPlayer in ipairs(Players:GetPlayers()) do
                if otherPlayer ~= player and otherPlayer.Character and otherPlayer.Character:FindFirstChild("HumanoidRootPart") then
                    -- Karakter parçalarındaki hitbox'ları kontrol et
                    for _, part in ipairs(otherPlayer.Character:GetDescendants()) do
                        if part:IsA("BasePart") and not part:FindFirstChild("Hitbox") then
                            local hitbox = Instance.new("BoxHandleAdornment")
                            hitbox.Name = "Hitbox"
                            hitbox.Adornee = part
                            hitbox.Color3 = Color3.fromRGB(255, 0, 0)
                            hitbox.Transparency = 0.7
                            hitbox.AlwaysOnTop = true
                            hitbox.ZIndex = 10
                            hitbox.Size = part.Size
                            hitbox.Parent = part
                            
                            table.insert(hitboxes, hitbox)
                        end
                    end
                end
            end
        end)
        
        setStatus("Vuruş kutuları gösteriliyor")
    else
        if getgenv().HitboxConnection then
            getgenv().HitboxConnection:Disconnect()
            getgenv().HitboxConnection = nil
        end
        
        -- Tüm hitbox'ları temizle
        for _, plyr in ipairs(Players:GetPlayers()) do
            if plyr.Character then
                for _, part in ipairs(plyr.Character:GetDescendants()) do
                    if part:IsA("BoxHandleAdornment") and part.Name == "Hitbox" then
                        part:Destroy()
                    end
                end
            end
        end
        
        setStatus("Vuruş kutuları gizlendi")
    end
end

-- =====================
-- GUI Oluşturma
-- =====================

-- Status metni gösterme
local statusLabel = nil
function setStatus(text)
    if not statusLabel then return end
    statusLabel.Text = text
    
    delay(5, function()
        -- 5 saniye sonra metni sıfırla
        if statusLabel and statusLabel.Text == text then
            statusLabel.Text = "Hazır"
        end
    end)
end

-- Key doğrulama GUI'si
function createKeyVerificationGUI()
    -- CoreGui kullanma denemesi yap (bazı executor'lar izin vermez)
    local container = nil
    pcall(function()
        container = game:GetService("CoreGui")
    end)
    
    if not container then
        container = player.PlayerGui
    end
    
    -- Ana GUI oluştur
    local keyGUI = Instance.new("ScreenGui")
    keyGUI.Name = "KilasikKeyVerification"
    keyGUI.ResetOnSpawn = false
    keyGUI.ZIndexBehavior = Enum.ZIndexBehavior.Sibling
    keyGUI.Parent = container
    
    -- Arkaplan
    local background = Instance.new("Frame")
    background.Size = UDim2.new(0, 350, 0, 200)
    background.Position = UDim2.new(0.5, -175, 0.5, -100)
    background.BackgroundColor3 = colors.background
    background.BorderSizePixel = 0
    background.Parent = keyGUI
    
    local uiCorner = Instance.new("UICorner")
    uiCorner.CornerRadius = UDim.new(0, 10)
    uiCorner.Parent = background
    
    -- Başlık
    local title = Instance.new("TextLabel")
    title.Size = UDim2.new(1, 0, 0, 40)
    title.BackgroundColor3 = colors.header
    title.BorderSizePixel = 0
    title.Text = "KİLASİK GUI - Key Doğrulama"
    title.Font = Enum.Font.GothamBold
    title.TextSize = 18
    title.TextColor3 = colors.text
    title.Parent = background
    
    local titleCorner = Instance.new("UICorner")
    titleCorner.CornerRadius = UDim.new(0, 10)
    titleCorner.Parent = title
    
    local titleCoverBar = Instance.new("Frame")
    titleCoverBar.Size = UDim2.new(1, 0, 0, 10)
    titleCoverBar.Position = UDim2.new(0, 0, 1, -10)
    titleCoverBar.BackgroundColor3 = colors.header
    titleCoverBar.BorderSizePixel = 0
    titleCoverBar.ZIndex = 0
    titleCoverBar.Parent = title
    
    -- Açıklama
    local description = Instance.new("TextLabel")
    description.Size = UDim2.new(1, -40, 0, 40)
    description.Position = UDim2.new(0, 20, 0, 50)
    description.BackgroundTransparency = 1
    description.Text = "Bu GUI'yi kullanmak için geçerli bir key girmeniz gerekiyor."
    description.Font = Enum.Font.Gotham
    description.TextSize = 14
    description.TextWrapped = true
    description.TextColor3 = colors.text
    description.Parent = background
    
    -- Input kutusu
    local inputBox = Instance.new("TextBox")
    inputBox.Size = UDim2.new(1, -40, 0, 35)
    inputBox.Position = UDim2.new(0, 20, 0, 95)
    inputBox.BackgroundColor3 = colors.neutralDark
    inputBox.PlaceholderText = "Key'i buraya girin..."
    inputBox.PlaceholderColor3 = Color3.fromRGB(150, 150, 150)
    inputBox.Text = ""
    inputBox.Font = Enum.Font.Gotham
    inputBox.TextSize = 14
    inputBox.TextColor3 = colors.text
    inputBox.BorderSizePixel = 0
    inputBox.ClearTextOnFocus = false
    inputBox.Parent = background
    
    local inputBoxCorner = Instance.new("UICorner")
    inputBoxCorner.CornerRadius = UDim.new(0, 6)
    inputBoxCorner.Parent = inputBox
    
    -- Doğrulama butonu
    local verifyButton = Instance.new("TextButton")
    verifyButton.Size = UDim2.new(0, 150, 0, 35)
    verifyButton.Position = UDim2.new(0.5, -75, 0, 145)
    verifyButton.BackgroundColor3 = colors.highlight
    verifyButton.Text = "Doğrula"
    verifyButton.Font = Enum.Font.GothamBold
    verifyButton.TextSize = 16
    verifyButton.TextColor3 = colors.text
    verifyButton.BorderSizePixel = 0
    verifyButton.AutoButtonColor = false
    verifyButton.Parent = background
    
    local verifyButtonCorner = Instance.new("UICorner")
    verifyButtonCorner.CornerRadius = UDim.new(0, 6)
    verifyButtonCorner.Parent = verifyButton
    
    -- Sonuç etiketi
    local resultLabel = Instance.new("TextLabel")
    resultLabel.Size = UDim2.new(1, -40, 0, 20)
    resultLabel.Position = UDim2.new(0, 20, 0, 185)
    resultLabel.BackgroundTransparency = 1
    resultLabel.Text = ""
    resultLabel.Font = Enum.Font.Gotham
    resultLabel.TextSize = 14
    resultLabel.TextColor3 = colors.warning
    resultLabel.Parent = background
    
    -- Buton hover efekti
    verifyButton.MouseEnter:Connect(function()
        verifyButton.BackgroundColor3 = Color3.fromRGB(90, 150, 200)
    end)
    
    verifyButton.MouseLeave:Connect(function()
        verifyButton.BackgroundColor3 = colors.highlight
    end)
    
    -- Key doğrulama fonksiyonu
    verifyButton.MouseButton1Click:Connect(function()
        local inputKey = inputBox.Text
        
        if inputKey == KEY_CODE then
            resultLabel.Text = "Key doğrulandı! GUI yükleniyor..."
            resultLabel.TextColor3 = colors.success
            
            keyVerified = true
            
            -- GUI'yi yükle
            delay(1, function()
                keyGUI:Destroy()
                createMainGUI()
            end)
        else
            resultLabel.Text = "Geçersiz key! Lütfen tekrar deneyin."
            resultLabel.TextColor3 = colors.warning
            
            -- Hata efekti
            local originalColor = inputBox.BackgroundColor3
            inputBox.BackgroundColor3 = colors.warning
            delay(0.5, function()
                inputBox.BackgroundColor3 = originalColor
            end)
        end
    end)
    
    return keyGUI
end

-- Ana GUI'yi oluştur
function createMainGUI()
    if guiCreated then return end
    
    -- CoreGui kullanma denemesi yap (bazı executor'lar izin vermez)
    local container = nil
    pcall(function()
        container = game:GetService("CoreGui")
    end)
    
    if not container then
        container = player.PlayerGui
    end
    
    -- Ana GUI oluştur
    local mainGUI = Instance.new("ScreenGui")
    mainGUI.Name = "KilasikGUI"
    mainGUI.ResetOnSpawn = false
    mainGUI.ZIndexBehavior = Enum.ZIndexBehavior.Sibling
    mainGUI.Parent = container
    
    -- Ana çerçeve
    local mainFrame = Instance.new("Frame")
    mainFrame.Name = "MainFrame"
    mainFrame.Size = UDim2.new(0, 550, 0, 350)
    mainFrame.Position = UDim2.new(0.5, -275, 0.5, -175)
    mainFrame.BackgroundColor3 = colors.background
    mainFrame.BorderSizePixel = 0
    mainFrame.Active = true
    mainFrame.Draggable = true
    mainFrame.Parent = mainGUI
    
    local mainCorner = Instance.new("UICorner")
    mainCorner.CornerRadius = UDim.new(0, 10)
    mainCorner.Parent = mainFrame
    
    -- Başlık çubuğu
    local titleBar = Instance.new("Frame")
    titleBar.Name = "TitleBar"
    titleBar.Size = UDim2.new(1, 0, 0, 40)
    titleBar.BackgroundColor3 = colors.header
    titleBar.BorderSizePixel = 0
    titleBar.Parent = mainFrame
    
    local titleCorner = Instance.new("UICorner")
    titleCorner.CornerRadius = UDim.new(0, 10)
    titleCorner.Parent = titleBar
    
    local titleCoverBar = Instance.new("Frame")
    titleCoverBar.Size = UDim2.new(1, 0, 0, 10)
    titleCoverBar.Position = UDim2.new(0, 0, 1, -10)
    titleCoverBar.BackgroundColor3 = colors.header
    titleCoverBar.BorderSizePixel = 0
    titleCoverBar.ZIndex = 0
    titleCoverBar.Parent = titleBar
    
    -- Başlık metni
    local titleText = Instance.new("TextLabel")
    titleText.Size = UDim2.new(1, -100, 1, 0)
    titleText.Position = UDim2.new(0, 15, 0, 0)
    titleText.BackgroundTransparency = 1
    titleText.Text = "KİLASİK GUI"
    titleText.Font = Enum.Font.GothamBold
    titleText.TextSize = 18
    titleText.TextColor3 = colors.text
    titleText.TextXAlignment = Enum.TextXAlignment.Left
    titleText.Parent = titleBar
    
    -- Kapat butonu
    local closeButton = Instance.new("TextButton")
    closeButton.Size = UDim2.new(0, 30, 0, 30)
    closeButton.Position = UDim2.new(1, -35, 0, 5)
    closeButton.BackgroundColor3 = colors.warning
    closeButton.Text = "X"
    closeButton.Font = Enum.Font.GothamBold
    closeButton.TextSize = 16
    closeButton.TextColor3 = colors.text
    closeButton.BorderSizePixel = 0
    closeButton.AutoButtonColor = false
    closeButton.Parent = titleBar
    
    local closeCorner = Instance.new("UICorner")
    closeCorner.CornerRadius = UDim.new(0, 6)
    closeCorner.Parent = closeButton
    
    -- Minimize butonu
    local minimizeButton = Instance.new("TextButton")
    minimizeButton.Size = UDim2.new(0, 30, 0, 30)
    minimizeButton.Position = UDim2.new(1, -70, 0, 5)
    minimizeButton.BackgroundColor3 = colors.neutralLight
    minimizeButton.Text = "-"
    minimizeButton.Font = Enum.Font.GothamBold
    minimizeButton.TextSize = 20
    minimizeButton.TextColor3 = colors.text
    minimizeButton.BorderSizePixel = 0
    minimizeButton.AutoButtonColor = false
    minimizeButton.Parent = titleBar
    
    local minimizeCorner = Instance.new("UICorner")
    minimizeCorner.CornerRadius = UDim.new(0, 6)
    minimizeCorner.Parent = minimizeButton
    
    -- Kategori sekmesi
    local categoryFrame = Instance.new("Frame")
    categoryFrame.Name = "CategoryFrame"
    categoryFrame.Size = UDim2.new(0, 130, 1, -40)
    categoryFrame.Position = UDim2.new(0, 0, 0, 40)
    categoryFrame.BackgroundColor3 = colors.categoryBG
    categoryFrame.BorderSizePixel = 0
    categoryFrame.Parent = mainFrame
    
    local categoryButtons = {}
    
    -- Kategori butonları
    for i, category in ipairs(categories) do
        local categoryButton = Instance.new("TextButton")
        categoryButton.Name = category .. "Button"
        categoryButton.Size = UDim2.new(1, -20, 0, 35)
        categoryButton.Position = UDim2.new(0, 10, 0, 10 + (i-1) * 40)
        categoryButton.BackgroundColor3 = category == activeTab and colors.buttonSelected or colors.button
        categoryButton.Text = category
        categoryButton.Font = Enum.Font.GothamSemibold
        categoryButton.TextSize = 14
        categoryButton.TextColor3 = colors.text
        categoryButton.BorderSizePixel = 0
        categoryButton.AutoButtonColor = false
        categoryButton.Parent = categoryFrame
        
        local categoryCorner = Instance.new("UICorner")
        categoryCorner.CornerRadius = UDim.new(0, 6)
        categoryCorner.Parent = categoryButton
        
        -- Hover efekti
        categoryButton.MouseEnter:Connect(function()
            if activeTab ~= category then
                categoryButton.BackgroundColor3 = colors.buttonHover
            end
        end)
        
        categoryButton.MouseLeave:Connect(function()
            if activeTab ~= category then
                categoryButton.BackgroundColor3 = colors.button
            end
        end)
        
        -- Tıklama fonksiyonu
        categoryButton.MouseButton1Click:Connect(function()
            -- Aktif sekmeyi değiştir
            if activeTab ~= category then
                -- Önceki butonun rengini sıfırla
                for _, btn in pairs(categoryButtons) do
                    btn.BackgroundColor3 = colors.button
                end
                
                -- Yeni butonun rengini değiştir
                categoryButton.BackgroundColor3 = colors.buttonSelected
                
                -- Aktif sekmeyi güncelle
                activeTab = category
                
                -- İçerik panelini güncelle
                updateContentPanel()
            end
        end)
        
        categoryButtons[category] = categoryButton
    end
    
    -- İçerik paneli
    local contentFrame = Instance.new("Frame")
    contentFrame.Name = "ContentFrame"
    contentFrame.Size = UDim2.new(1, -140, 1, -90)
    contentFrame.Position = UDim2.new(0, 135, 0, 45)
    contentFrame.BackgroundColor3 = colors.background
    contentFrame.BorderSizePixel = 0
    contentFrame.Parent = mainFrame
    
    -- Arama çubuğu
    local searchBar = Instance.new("TextBox")
    searchBar.Name = "SearchBar"
    searchBar.Size = UDim2.new(1, -15, 0, 35)
    searchBar.Position = UDim2.new(0, 5, 0, 5)
    searchBar.BackgroundColor3 = colors.neutralDark
    searchBar.PlaceholderText = "Komut ara..."
    searchBar.PlaceholderColor3 = Color3.fromRGB(150, 150, 150)
    searchBar.Text = ""
    searchBar.Font = Enum.Font.Gotham
    searchBar.TextSize = 14
    searchBar.TextColor3 = colors.text
    searchBar.BorderSizePixel = 0
    searchBar.ClearTextOnFocus = false
    searchBar.Parent = contentFrame
    
    local searchBarCorner = Instance.new("UICorner")
    searchBarCorner.CornerRadius = UDim.new(0, 6)
    searchBarCorner.Parent = searchBar
    
    -- Komut listesi
    local commandList = Instance.new("ScrollingFrame")
    commandList.Name = "CommandList"
    commandList.Size = UDim2.new(1, -10, 1, -50)
    commandList.Position = UDim2.new(0, 5, 0, 45)
    commandList.BackgroundTransparency = 1
    commandList.BorderSizePixel = 0
    commandList.ScrollBarThickness = 6
    commandList.ScrollBarImageColor3 = colors.neutralLight
    commandList.CanvasSize = UDim2.new(0, 0, 0, 0) -- Otomatik ayarlanacak
    commandList.Parent = contentFrame
    
    -- Liste düzeni
    local listLayout = Instance.new("UIListLayout")
    listLayout.Padding = UDim.new(0, 5)
    listLayout.Parent = commandList
    
    -- Durum çubuğu
    local statusBar = Instance.new("Frame")
    statusBar.Name = "StatusBar"
    statusBar.Size = UDim2.new(1, -135, 0, 30)
    statusBar.Position = UDim2.new(0, 135, 1, -35)
    statusBar.BackgroundColor3 = colors.neutralDark
    statusBar.BorderSizePixel = 0
    statusBar.Parent = mainFrame
    
    local statusCorner = Instance.new("UICorner")
    statusCorner.CornerRadius = UDim.new(0, 6)
    statusCorner.Parent = statusBar
    
    -- Durum metni
    statusLabel = Instance.new("TextLabel")
    statusLabel.Size = UDim2.new(1, -20, 1, 0)
    statusLabel.Position = UDim2.new(0, 10, 0, 0)
    statusLabel.BackgroundTransparency = 1
    statusLabel.Text = "Hazır"
    statusLabel.Font = Enum.Font.Gotham
    statusLabel.TextSize = 14
    statusLabel.TextColor3 = colors.text
    statusLabel.TextXAlignment = Enum.TextXAlignment.Left
    statusLabel.Parent = statusBar
    
    -- Kredi etiketi
    local creditLabel = Instance.new("TextLabel")
    creditLabel.Size = UDim2.new(0, 130, 0, 30)
    creditLabel.Position = UDim2.new(0, 0, 1, -30)
    creditLabel.BackgroundColor3 = colors.categoryBG
    creditLabel.Text = "KİLASİK"
    creditLabel.Font = Enum.Font.GothamBold
    creditLabel.TextSize = 14
    creditLabel.TextColor3 = Color3.fromRGB(255, 215, 0) -- Altın rengi
    creditLabel.BorderSizePixel = 0
    creditLabel.Parent = mainFrame
    
    -- Hover ve Tıklama Efektleri
    closeButton.MouseEnter:Connect(function()
        closeButton.BackgroundColor3 = Color3.fromRGB(255, 60, 60)
    end)
    
    closeButton.MouseLeave:Connect(function()
        closeButton.BackgroundColor3 = colors.warning
    end)
    
    minimizeButton.MouseEnter:Connect(function()
        minimizeButton.BackgroundColor3 = Color3.fromRGB(80, 80, 100)
    end)
    
    minimizeButton.MouseLeave:Connect(function()
        minimizeButton.BackgroundColor3 = colors.neutralLight
    end)
    
    -- Buton işlevleri
    closeButton.MouseButton1Click:Connect(function()
        mainGUI:Destroy()
        guiCreated = false
    end)
    
    local minimized = false
    minimizeButton.MouseButton1Click:Connect(function()
        minimized = not minimized
        
        if minimized then
            contentFrame.Visible = false
            categoryFrame.Visible = false
            statusBar.Visible = false
            creditLabel.Visible = false
            mainFrame.Size = UDim2.new(0, 550, 0, 40)
        else
            contentFrame.Visible = true
            categoryFrame.Visible = true
            statusBar.Visible = true
            creditLabel.Visible = true
            mainFrame.Size = UDim2.new(0, 550, 0, 350)
        end
    end)
    
    -- Arama fonksiyonu
    searchBar.Changed:Connect(function(prop)
        if prop == "Text" then
            updateCommandList(searchBar.Text)
        end
    end)
    
    -- İçerik panelini güncelleme fonksiyonu
    function updateContentPanel()
        updateCommandList(searchBar.Text)
    end
    
    -- Komut listesini güncelleme fonksiyonu
    function updateCommandList(searchQuery)
        -- Listeyi temizle
        for _, child in pairs(commandList:GetChildren()) do
            if child:IsA("Frame") then
                child:Destroy()
            end
        end
        
        -- Yeni komutları ekle
        local yOffset = 0
        local buttonHeight = 40
        
        for _, cmd in ipairs(commands) do
            -- Ana kategori sekmesi ya da arama sorgusuna uyan komutları göster
            if (activeTab == "Main" or cmd.category == activeTab) and 
               (searchQuery == "" or string.find(string.lower(cmd.name), string.lower(searchQuery)) or 
                string.find(string.lower(cmd.desc), string.lower(searchQuery))) then
                
                -- Komut butonu
                local commandButton = Instance.new("Frame")
                commandButton.Name = cmd.name .. "Button"
                commandButton.Size = UDim2.new(1, -10, 0, buttonHeight)
                commandButton.BackgroundColor3 = colors.button
                commandButton.BorderSizePixel = 0
                commandButton.Parent = commandList
                
                local commandCorner = Instance.new("UICorner")
                commandCorner.CornerRadius = UDim.new(0, 6)
                commandCorner.Parent = commandButton
                
                -- Komut adı
                local nameLabel = Instance.new("TextLabel")
                nameLabel.Size = UDim2.new(0.4, -10, 1, 0)
                nameLabel.Position = UDim2.new(0, 10, 0, 0)
                nameLabel.BackgroundTransparency = 1
                nameLabel.Text = cmd.name
                nameLabel.Font = Enum.Font.GothamSemibold
                nameLabel.TextSize = 14
                nameLabel.TextColor3 = colors.text
                nameLabel.TextXAlignment = Enum.TextXAlignment.Left
                nameLabel.Parent = commandButton
                
                -- Komut açıklaması
                local descLabel = Instance.new("TextLabel")
                descLabel.Size = UDim2.new(0.6, -10, 1, 0)
                descLabel.Position = UDim2.new(0.4, 0, 0, 0)
                descLabel.BackgroundTransparency = 1
                descLabel.Text = cmd.desc
                descLabel.Font = Enum.Font.Gotham
                descLabel.TextSize = 12
                descLabel.TextColor3 = Color3.fromRGB(200, 200, 200)
                descLabel.TextXAlignment = Enum.TextXAlignment.Left
                descLabel.TextWrapped = true
                descLabel.Parent = commandButton
                
                -- Arka plan buton
                local clickButton = Instance.new("TextButton")
                clickButton.Size = UDim2.new(1, 0, 1, 0)
                clickButton.BackgroundTransparency = 1
                clickButton.Text = ""
                clickButton.ZIndex = 10
                clickButton.Parent = commandButton
                
                -- Buton hover efekti
                clickButton.MouseEnter:Connect(function()
                    commandButton.BackgroundColor3 = colors.buttonHover
                end)
                
                clickButton.MouseLeave:Connect(function()
                    commandButton.BackgroundColor3 = colors.button
                end)
                
                -- Tıklama fonksiyonu
                clickButton.MouseButton1Click:Connect(function()
                    -- Komutu çalıştır
                    if cmd.func then
                        cmd.func()
                    end
                    
                    -- Buton basma efekti
                    commandButton.BackgroundColor3 = colors.buttonSelected
                    wait(0.1)
                    commandButton.BackgroundColor3 = colors.button
                end)
                
                yOffset = yOffset + buttonHeight + 5
            end
        end
        
        -- Canvas boyutunu ayarla
        commandList.CanvasSize = UDim2.new(0, 0, 0, yOffset)
    end
    
    -- İlk kategoriyi göster
    updateContentPanel()
    
    -- GUI'yi görünür yap
    mainGUI.Enabled = true
    guiCreated = true
    guiVisible = true
    
    -- Infinite Yield gibi RightControl tuşunu kısayol olarak ekle
    UserInputService.InputBegan:Connect(function(input, gameProcessed)
        if not gameProcessed and input.KeyCode == Enum.KeyCode.RightControl then
            -- GUI'yi aç/kapat
            mainGUI.Enabled = not mainGUI.Enabled
            guiVisible = mainGUI.Enabled
        end
    end)
    
    return mainGUI
end

-- =====================
-- Ana Fonksiyon
-- =====================

-- GUI'yi başlat
if not keyVerified then
    createKeyVerificationGUI()
else
    createMainGUI()
end

-- Sonsuz zıplama için event
UserInputService.JumpRequest:Connect(function()
    if infiniteJump and player.Character and player.Character:FindFirstChild("Humanoid") then
        player.Character.Humanoid:ChangeState(Enum.HumanoidStateType.Jumping)
    end
end)

-- Başlatma mesajı
print("KİLASİK GUI yüklendi! Key: " .. KEY_CODE)
print("KİLASİK GUI'yi açmak/kapatmak için RightControl tuşunu kullanın.")
